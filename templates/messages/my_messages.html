{% extends "base.html" %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block content %}
<div class="container-fluid" style="position: relative;">
	<div class="row">
		<div class="col-md-3 position-fixed">
            <table id="tablePreview" class="table table-borderless">
                <thead>
                    <tr><th class="text-center" id="conversation-top">Conversations</th></tr>
                </thead>
                <tbody>
                    {% for user in user_interactions.all %}
                    <tr><td class="text-center align-center">
                        <a href="/messages/{{ user.id }}" class="nav-link">{{ user }}</a>
                    </td></tr>
                    {% endfor %}
                </tbody>
            </table>
		</div>
		<div class="col-md-9" style="margin-left: 25%;">
            <div class="row">
				<div class="col-md-12">
					<h3 class="text-center" id="conversation-head">
                        {% if other_user == "everyone" %}
                        All messages
                        {% else %}
						Conversation with {{ other_user }}
                        {% endif %}
					</h3>
				</div>
			</div>
            {% if not other_user == "everyone" %}
            <div class="row">
                <div class="col-md-12">
                    <form action="" method="POST">
                        {% csrf_token %}
                        {% bootstrap_form form %}
                        <div class="text-right">
                            <button type="submit" id="send-button" class="btn btn-primary" value="test">Send</button>
                        </div>

                    </form>
                </div>
            </div>
            {% endif %}
            {% for message in mails %}
			<div class="row">
				<div class="col-md-12">
					<p>
                        <strong>{{ message.sender }}</strong><small>{{ message.date }} </small>: {{ message.text }}
					</p>
				</div>
			</div>
            <br/>
            {% endfor %}

		</div>
	</div>
</div>

{% endblock %}